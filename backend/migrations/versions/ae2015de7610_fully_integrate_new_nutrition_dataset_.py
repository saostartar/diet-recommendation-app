"""Fully integrate new nutrition dataset into Food model

Revision ID: ae2015de7610
Revises: 04230d881717
Create Date: 2025-05-28 19:27:24.395934

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = 'ae2015de7610'
down_revision = '04230d881717'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('foods', schema=None) as batch_op:
        batch_op.add_column(sa.Column('food_code', sa.String(length=50), nullable=True))
        batch_op.add_column(sa.Column('copper', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('retinol_mcg', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('thiamin_mg', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('riboflavin_mg', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('niacin_mg', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('food_status', sa.String(length=100), nullable=True))
        batch_op.add_column(sa.Column('food_group', sa.String(length=100), nullable=True))
        batch_op.add_column(sa.Column('meal_type', sa.String(length=100), nullable=True))
        batch_op.create_unique_constraint(None, ['food_code'])
        batch_op.drop_column('cholesterol')
        batch_op.drop_column('vitamin_b1')
        batch_op.drop_column('pufa')
        batch_op.drop_column('total_folic_acid')
        batch_op.drop_column('energy_kj')
        batch_op.drop_column('vitamin_e')
        batch_op.drop_column('vitamin_a')
        batch_op.drop_column('magnesium')
        batch_op.drop_column('vitamin_b6')
        batch_op.drop_column('vitamin_b2')

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('foods', schema=None) as batch_op:
        batch_op.add_column(sa.Column('vitamin_b2', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('vitamin_b6', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('magnesium', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('vitamin_a', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('vitamin_e', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('energy_kj', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('total_folic_acid', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('pufa', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('vitamin_b1', mysql.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('cholesterol', mysql.FLOAT(), nullable=True))
        batch_op.drop_constraint(None, type_='unique')
        batch_op.drop_column('meal_type')
        batch_op.drop_column('food_group')
        batch_op.drop_column('food_status')
        batch_op.drop_column('niacin_mg')
        batch_op.drop_column('riboflavin_mg')
        batch_op.drop_column('thiamin_mg')
        batch_op.drop_column('retinol_mcg')
        batch_op.drop_column('copper')
        batch_op.drop_column('food_code')

    # ### end Alembic commands ###
